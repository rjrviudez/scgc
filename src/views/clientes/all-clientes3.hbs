<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.2/jquery.modal.min.js"
    integrity="sha512-ztxZscxb55lKL+xmWGZEbBHekIzy+1qYKHGZTWZYH1GUwxy0hiA18lW6ORIMj4DHRgvmP/qGcvqwEyFFV7OYVQ=="
    crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.2/jquery.modal.js"
    integrity="sha512-Xd3wzuGJmU0vEl1Rt2R8WMr7roPdHGCbeoKWAFNOdLfKHSjaCvgTn0UqPXLjuYIKd9biT1KU4t/icygeGYRz2w=="
    crossorigin="anonymous"></script>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.2/jquery.modal.min.css"
    integrity="sha512-T3VL1q6jMUIzGLRB9z86oJg9PgF7A55eC2XkB93zyWSqQw3Ju+6IEJZYBfT7E9wOHM7HCMCOZSpcssxnUn6AeQ=="
    crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.2/jquery.modal.css"
    integrity="sha512-JP49dvydjvdq6qd31grbdqIeExUyLFFIIneoetY/cJ+eQeJ6ok5HhaM4kQfIeQV4maAMGQ5kf4In3T7VKwMufg=="
    crossorigin="anonymous" />

<div class="container">
    <div>
        <h1> RT Sistema - Listado de Clientes</h1>
    </div>
    <table class="table table-striped table-hover ">
        <thead class="thead-dark ">

            <tr>

                <th>
                    Ticket
                </th>
                <th>
                    Nombre
                </th>
                <th>
                    Direccion

                </th>
                <th>
                    Cod Postal
                </th>
                <th>
                    Movil
                </th>
                <th>
                    email
                </th>
                <th>
                    Descripcion
                </th>
                <th>
                    Observaciones
                </th>
                <th>
                    Estatus
                </th>
                <th>
                    Fecha
                </th>
                <th>
                    Editar <br> Eliminar
                </th>
            </tr>
        </thead>
        <tbody>
            {{#each clientes}}

            <tr>

                <td class="td"> {{ticket}} </td>
                <td class="td"> {{name}} </td>
                <td class="td"> {{direccion}} </td>
                <td class="td"> {{zip}} </td>
                <td class="td"> {{movil}} </td>
                <td class="td"> {{email}} </td>
                <td class="td"> {{descripcion}} </td>
                <td class="td"> {{observacion}} </td>
                <td class="td"> {{estatus}} </td>
                <td class="td"> {{fecha}} </td>
                <td>
                    <div><a href="/clientes/edit/ {{_id}}" class="  far fa-edit fa-2x"></a>
                        <form action="/clientes/delete/{{_id}} ? _method=DELETE" method="POST">
                            <input type="hidden" name="_method" value="DELETE"> <button
                                onclick="return ConfirmDelete() " type="submit"
                                class="far fa-trash-alt fa-1x "></button>
                        </form>
                    </div>
                </td>
            </tr>
        </tbody>

        {{else}}
        <div class="card mx-auto">
            <div class="card-body">
                <h1>Hola {{user.name}} </h1>
                <p class="lead">Aun no hay Clientes</p>
                <a href="/clientes/add" class="btn btn-success btn-block">Agregar Cliente</a>
            </div>
        </div>
        {{/each}}


    </table>
</div>

<div class="modal   modal-xl" id="myModal" tabindex="-1">
    <div class="modal-xl">
        <div class="modal-contet">
            <div class="modal-header">
                <h5 class="modal-title">Modal title Que pasa?</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">



                <table class="table table-striped">
                    <thead class="thead-dark ">

                        <tr>

                            <th>
                                Ticket
                            </th>
                            <th>
                                Nombre
                            </th>
                            <th>
                                Direccion

                            </th>
                            <th>
                                Cod Postal
                            </th>
                            <th>
                                Movil
                            </th>
                            <th>
                                email
                            </th>
                            <th>
                                Descripcion
                            </th>
                            <th>
                                Observaciones
                            </th>
                            <th>
                                Estatus
                            </th>
                            <th>
                                Fecha
                            </th>
                            <th>
                                Editar <br> Eliminar
                            </th>
                        </tr>
                    </thead>
                    <tr>

                        <td> <input type="text" class="input" id="ticket" /> </td>
                        <td> <input type="text" class="input" id="name" /> </td>
                        <td> <input type="text" class="input" id="direccion" /> </td>
                        <td> <input type="text" class="input" id="zip" /> </td>
                        <td> <input type="text" class="input" id="movil" /> </td>
                        <td> <input type="text" class="input" id="email" /> </td>
                        <td> <input type="text" class="input" id="descripcion" /> </td>
                        <td> <input type="text" class="input" id="observacion" /> </td>
                        <td> <input type="text" class="input" id="estatus" /> </td>
                        <td> <input type="text" class="input" id="fecha" /></h3>

                    </tr>


                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary">Save changes</button>

                    </div>
                </table>


                <p>Modal body text goes here.</p>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary">Save changes</button>
            </div>
        </div>
    </div>
</div>



<script type="text/javascript">
    function ConfirmDelete() {
        var resp = confirm("Estas seguro de querer eliminar este cliente?");
        if (resp == true) { return true } else { return false }
    };
    $(" table tbody tr  .td").on('click', function () {
        $('#myModal').modal('show');
        console.log("funcionando");
        console.log($(this).closest('tr').children()[0].textContent);
        console.log($(this).closest('tr').children()[1].textContent);
        console.log($(this).closest('tr').children()[2].textContent);
        console.log($(this).closest('tr').children()[3].textContent);
        console.log($(this).closest('tr').children()[4].textContent);
        console.log($(this).closest('tr').children()[5].textContent);
        console.log($(this).closest('tr').children()[6].textContent);
        console.log($(this).closest('tr').children()[7].textContent);
        console.log($(this).closest('tr').children()[8].textContent);
        console.log($(this).closest('tr').children()[9].textContent);

        $("#ticket").val(($(this).closest('tr').children()[0].textContent));
        $("#name").val(($(this).closest('tr').children()[1].textContent));
        $("#direccion").val(($(this).closest('tr').children()[2].textContent));
        $("#zip").val(($(this).closest('tr').children()[3].textContent));
        $("#movil").val(($(this).closest('tr').children()[4].textContent));
        $("#email").val(($(this).closest('tr').children()[5].textContent));
        $("#descripcion").val(($(this).closest('tr').children()[6].textContent));
        $("#observacion").val(($(this).closest('tr').children()[7].textContent));
        $("#estatus").val(($(this).closest('tr').children()[8].textContent));
        $("#fecha").val(($(this).closest('tr').children()[9].textContent));


    });











</script>