<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.2/jquery.modal.min.js"
    integrity="sha512-ztxZscxb55lKL+xmWGZEbBHekIzy+1qYKHGZTWZYH1GUwxy0hiA18lW6ORIMj4DHRgvmP/qGcvqwEyFFV7OYVQ=="
    crossorigin="anonymous"></script>



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.2/jquery.modal.min.css"
    integrity="sha512-T3VL1q6jMUIzGLRB9z86oJg9PgF7A55eC2XkB93zyWSqQw3Ju+6IEJZYBfT7E9wOHM7HCMCOZSpcssxnUn6AeQ=="
    crossorigin="anonymous" /> -->

<!--

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.2/jquery.modal.js"
    integrity="sha512-Xd3wzuGJmU0vEl1Rt2R8WMr7roPdHGCbeoKWAFNOdLfKHSjaCvgTn0UqPXLjuYIKd9biT1KU4t/icygeGYRz2w=="
    crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.2/jquery.modal.css"
    integrity="sha512-JP49dvydjvdq6qd31grbdqIeExUyLFFIIneoetY/cJ+eQeJ6ok5HhaM4kQfIeQV4maAMGQ5kf4In3T7VKwMufg=="
    crossorigin="anonymous" />
 -->
<style>

</style>


<div class="container ">
    <div class="col text-align-center"  >
        <img src="/img/RT-Construct-Logo.png" class="m-4 logo1 " alt="RT Construct">
        <h3 > RT System - Listado de Clientes</h3>
    </div>
    <div class="col mx-auto">
        <table class="table table-striped table-hover ">
            <thead class=" thead-dark " style=" font-size:18px; ">

                <tr>
                    <th>
                        Fecha
                    </th>
                    <th>
                        Hora
                    </th>
                    <th>
                        Ticket
                    </th>
                    <th>
                        Nombre
                    </th>
                    <th style=" display:none;">
                        Direccion
                    </th>
                    <th style="display:none;">
                        Cod Postal
                    </th>
                    <th style="display:none;">
                        MovI
                    </th>
                    <th style="display:none;">
                        MovII
                    </th>
                    <th style="display:none;">
                        MovIII
                    </th>
                    <th style="display:none;">
                        email
                    </th>
                    <th style="display:none;">
                        Descripcion
                    </th>
                    <th style="display:none;">
                        Observaciones
                    </th>
                    <th>
                        Estado
                    </th>
                    <th style="display:none;">
                        Operario
                    </th>
                    <th>

                    </th>
                </tr>
            </thead>
            <tbody>
                {{#each clientes}}

                <tr>
                    <td> {{fecha}} </td>
                    <td> {{hora}} </td>
                    <td> {{ticket}} </td>
                    <td> {{name}} </td>
                    <td style="display:none;"> {{direccion}} </td>
                    <td style="display:none;"> {{zip}} </td>
                    <td style="display:none;"> {{movil}} </td>
                    <td style="display:none;"> {{movil1}} </td>
                    <td style="display:none;"> {{movil2}} </td>
                    <td style="display:none;"> {{email}} </td>
                    <td style="display:none;"> {{detalles.descripcion}} </td>
                    <td style="display:none;"> {{detalles.observacion}} </td>
                    <td> <ol>  {{#each detalles}} <li> {{estatus}}</li> {{/each}} </ol></td>
                    <td style="display:none;"> {{usuario}} </td>

                    <td>
                        <div><a href="/clientes/edit/ {{_id}}" title="Editar"><img src="/img/Edit-icon-32.png"
                                    alt="Editar">
                            </a>
                            <a href="/clientes/delete/ {{_id}}"> <img src="/img/trash-32x32.png" type="button"
                                    onclick="return ConfirmDelete() " title="Eliminar"></a>



                            <!-- Button trigger modal -->
                            <a href="/clientes/estado/{{_id}}"> <img src="/img/ico_lupa.png" alt="Estado del cliente "
                                    title="Detalles"></a>



                        </div>
                    </td>
                </tr>
            </tbody>

            {{else}}
            <div class="card mx-auto">
                <div class="card-body">
                    <h1>Hola {{user.name}} </h1>
                    <p class="lead">Aun no hay Clientes</p>
                    <a href="/clientes/add" class="btn btn-success btn-block">Agregar Cliente</a>
                </div>
            </div>
            {{/each}}


        </table>
    </div>
    <!-- Button trigger modal 
    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">
        Launch demo modal
    </button>-->

    <!-- Modal -->
    <div class="modal fade  " id="myModal" tabindex="-1" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class=" modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header bg-info">
                    <h4 class="modal-title " id="myModalLabel"> Detalle Cliente</h4>

                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">


                    <table class="grd">
                        <thead class="theadgrd" style="font-size: 12px;">

                            <tr>
                                <th scope="col">
                                    Fecha
                                </th>
                                <th scope="col">
                                    Ticket
                                </th>
                                <th scope="col">
                                    Nombre
                                </th>
                                <th scope="col">
                                    Direccion
                                </th>
                                <th scope="col">
                                    Cod Postal
                                </th>
                                <th scope="col">
                                    MovI
                                </th>
                                <th scope="col">
                                    MovII
                                </th>
                                <th scope="col">
                                    MovIII
                                </th>
                                <th scope="col">
                                    email
                                </th>
                                <th scope="col">
                                    Descripcion
                                </th>
                                <th scope="col">
                                    Observaciones
                                </th>
                                <th scope="col">
                                    Estatus
                                </th>
                                <th scope="col">
                                    Operario
                                </th>
                            </tr>
                        </thead>
                        <tbody>


                            <tr style="font-size: 10px;">
                                <td> <input type="text" style="width: 60px;" id="fecha" /> </td>
                                <td> <input type="text" style="width: 70px;" id="ticket" /> </td>
                                <td> <input type="text" style="width: 70px;" id="name" /> </td>
                                <td> <textarea class="input" style="width: 120px;" id="direccion"></textarea></td>
                                <td> <input type="text" style="width: 70px;" id="zip" /> </td>
                                <td> <input type="text" style="width: 70px;" id="movil" /> </td>
                                <td> <input type="text" style="width: 70px;" id="movil1" /> </td>
                                <td> <input type="text" style="width: 70px;" id="movil2" /> </td>
                                <td> <input type="text" style="width: 70px;" id="email" /> </td>
                                <td><textarea class="input" style="width: 120px;" id="descripcion"></textarea> </td>
                                <td> <textarea class="input" style="width: 120px;" id="observacion"></textarea> </td>
                                <td><input type="text" style="width: 70px;" id="estatus" /> </td>
                                <td><input type="text" style="width: 70px;" id="usuario" /> </td>
                            </tr>
                        </tbody>
                    </table>


                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary">Save changes</button>
                    </div>


                </div>
            </div>
        </div>

    </div>



    <script type="text/javascript">
        function ConfirmDelete() {
            var resp = confirm("Estas seguro de querer eliminar este cliente?");
            if (resp == true) { return true } else { return false }
        };
        $("table tbody tr  td").on('click', function () {

            console.log("funcionando");
            console.log($(this).closest('tr').children()[0].textContent);
            console.log($(this).closest('tr').children()[1].textContent);
            console.log($(this).closest('tr').children()[2].textContent);
            console.log($(this).closest('tr').children()[3].textContent);
            console.log($(this).closest('tr').children()[4].textContent);
            console.log($(this).closest('tr').children()[5].textContent);
            console.log($(this).closest('tr').children()[6].textContent);
            console.log($(this).closest('tr').children()[7].textContent);
            console.log($(this).closest('tr').children()[8].textContent);
            console.log($(this).closest('tr').children()[9].textContent);
            console.log($(this).closest('tr').children()[10].textContent);
            console.log($(this).closest('tr').children()[11].textContent);
            console.log($(this).closest('tr').children()[12].textContent);
            $("#fecha").val(($(this).closest('tr').children()[0].textContent));
            $("#ticket").val(($(this).closest('tr').children()[1].textContent));
            $("#name").val(($(this).closest('tr').children()[2].textContent));
            $("#direccion").val(($(this).closest('tr').children()[3].textContent));
            $("#zip").val(($(this).closest('tr').children()[4].textContent));
            $("#movil").val(($(this).closest('tr').children()[5].textContent));
            $("#movil1").val(($(this).closest('tr').children()[6].textContent));
            $("#movil2").val(($(this).closest('tr').children()[7].textContent));
            $("#email").val(($(this).closest('tr').children()[8].textContent));
            $("#descripcion").val(($(this).closest('tr').children()[9].textContent));
            $("#observacion").val(($(this).closest('tr').children()[10].textContent));
            $("#estatus").val(($(this).closest('tr').children()[11].textContent));

            $("#usuario").val(($(this).closest('tr').children()[12].textContent));


        });








    </script>